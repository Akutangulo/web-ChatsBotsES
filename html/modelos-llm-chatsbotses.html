<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modelos LLM</title>

    <style>
/* =========================================
   1. FUENTES E IMPORTACIONES
   ========================================= */
@import url('https://fonts.googleapis.com/css2?family=Afacad+Flux:wght@100..1000&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap');

@font-face {
    font-family: 'bauhouse_akutangulo';
    src: url('./assets/fonts/bauhouse_akutangulo.eot'); 
    src: url('./assets/fonts/bauhouse_akutangulo.eot?#iefix') format('embedded-opentype'),
         url('./assets/fonts/bauhouse_akutangulo.ttf') format('truetype'); 
}

/* =========================================
   2. VARIABLES (SISTEMA DE DISEÑO)
   ========================================= */
:root {
    /* --- Dimensiones --- */
    --btn-h: 50px; 
    --btn-half: calc(var(--btn-h) / 2);

    /* --- Paleta Core --- */
    --color-akutangulo: #9300D3;
    --color-chatsbotses: #0ff;
    --color-menu: #7a00b3;
    --color-cta: #00C2FF;
    --color-sombra: #9300D3;

    /* --- Paleta General (Modo Oscuro por defecto) --- */
    --primary: #8e24aa;
    --secondary: #d500f9;
    --light: #ea80fc;
    --bg-primary: #1e0b2d;
    --bg-secondary: #2c1443;
    --bg-surface: #4a1d7d;
    
    --text-primary: #e1b0ff;
    --text-secondary: #c499ec; 
    --text-muted: #8a5ca9;
    
    --accent-primary: #d500f9;
    --accent-secondary: #a267ff;
    --border: #5e3aad;
    --hover-bg: #b388ff;
    
    /* --- Variables Específicas CARDS & INPUTS (Modo Oscuro) --- */
    --bg-card: rgba(44, 20, 67, 0.6);
    --border-card: rgba(255, 255, 255, 0.1);
    --bg-icon: rgba(147, 0, 211, 0.2);
    --bg-input: rgba(30, 11, 45, 0.8); 
    --bg-inner-details: rgba(0, 0, 0, 0.2); 
    --color-accent-text: #0ff; 
}

/* --- TEMA CLARO --- */
.tema-claro {
    --bg-primary: #f9f4ff;
    --bg-secondary: #f0e6ff;
    --bg-surface: #e6d8ff;
    
    --text-primary: #2c004b;
    --text-secondary: #4e2a72;
    --text-muted: #7b5ca3;
    
    --accent-primary: #7b1fa2;
    --accent-secondary: #8e2eb4;
    --border: #b197d8;
    --color-sombra: #0ff;

    /* --- Variables Específicas CARDS & INPUTS (Modo Claro) --- */
    --bg-card: rgba(255, 255, 255, 0.85); 
    --border-card: rgba(147, 0, 211, 0.2);
    --bg-icon: rgba(147, 0, 211, 0.1);
    --bg-input: #ffffff; 
    --bg-inner-details: rgba(147, 0, 211, 0.08); 
    --color-accent-text: #7a00b3; 
}

/* =========================================
   3. RESET Y ESTILOS GLOBALES
   ========================================= */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { scroll-behavior: smooth; }

body {
    font-family: "Afacad Flux", sans-serif;
    line-height: 1.6;
    color: var(--text-primary);
    background-color: var(--bg-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

h1 { font-size: 3rem; padding: 0.1rem 3rem; text-align: center; }
h2 { font-size: 2.5rem; padding: 0.1rem 3rem; text-align: center; margin-bottom: 3rem; }
h3 { font-size: 1.5rem; }

@media (max-width: 768px) {
    h1 { font-size: 2rem; padding: 0.1rem 1rem; }
    h2 { font-size: 1.7rem; padding: 0.1rem 1rem; }
    h3 { font-size: 1.3rem; }
}

/* --- Tipografía y Elementos de Texto --- */
p {
    margin-bottom: 1.5rem;
    color: var(--text-secondary);
    font-size: 1.1rem;
    line-height: 1.8;
    max-width: 75ch;
}

a {
    color: var(--color-cta);
    text-decoration: none;
    transition: all 0.2s ease;
    border-bottom: 1px solid transparent;
}
a:hover {
    color: var(--color-chatsbotses);
    border-bottom-color: var(--color-chatsbotses);
    text-shadow: 0 0 8px rgba(0, 255, 255, 0.4);
}

strong, b { color: var(--text-primary); font-weight: 700; }
em, i { color: var(--text-muted); }

/* Listas */
ul, ol { margin: 0 0 1.5rem 0; padding-left: 1.2rem; color: var(--text-secondary); }
li { margin-bottom: 0.5rem; }
ul li::marker { color: var(--color-akutangulo); font-size: 1.2em; }

/* Code Blocks */
pre {
    background-color: #12051b;
    padding: 1.5rem;
    border-radius: 8px;
    overflow-x: auto;
    margin-bottom: 1.5rem;
    border: 1px solid var(--border);
}
code {
    font-family: 'Noto Sans', monospace;
    background-color: rgba(255, 255, 255, 0.1);
    padding: 0.2em 0.4em;
    border-radius: 4px;
    font-size: 0.9em;
    color: var(--color-chatsbotses);
}
pre code { background-color: transparent; padding: 0; color: #e0e0e0; }

/* =========================================
   4. COMPONENTES COMUNES
   ========================================= */

/* --- Contenedor --- */
.container {
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
    padding: 0 1.5rem;
}

/* --- Botones de Acción --- */
.action-button {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 0.5rem;
    background-color: var(--color-akutangulo);
    color: #fff;
    font-weight: 500;
    font-size: 1rem;
    cursor: pointer;
    text-decoration: none;
    transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out;
}
.action-button:hover,
.action-button:focus { 
    background-color: var(--secondary);
    transform: translateY(-2px);
    outline: 3px solid var(--accent-primary);
    outline-offset: 2px;
}
.action-button .icon {
   color: var(--text-primary);
   width: 20px;
   height: 20px;
}

/* --- Texto Neón --- */
@keyframes neon-color-change {
  0%, 100% { color: #0ff; }
  25% { color: #f0f; }
  50% { color: #ff0; }
  75% { color: #0f0; }
}
.neon-text {
  font-weight: 900;
  animation: neon-color-change 30s infinite;
  transition: all 0.5s ease-in-out;
  -webkit-text-stroke: 1px var(--text);
}
.neon-text:hover {
  animation: none;
  color: var(--color-chatsbotses);
  text-shadow: 0 0 10px var(--color-chatsbotses);
}

/* =========================================
   5. SECCIÓN: DIV MÁGICO (TEXT + MEDIA)
   ========================================= */
.magic-div {
    padding: 4rem 0;
}
/* Alternancia automática de fondo */
.magic-div:nth-child(even) {
    background-color: var(--bg-secondary);
}

.magic-div-content {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

/* Multimedia (Img/Video) */
.media-content {
    border-radius: 0.75rem;
    overflow: hidden;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}
.media-content img,
.media-content video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

/* Contenido Texto */
.text-content {
    display: flex;
    justify-content: center;
    align-items: center;
}
.text-wrapper { max-width: 75ch; }

.text-content h3 {
    font-size: 1.75rem;
    font-weight: 700;
    margin-bottom: 1rem;
}

/* Listas con iconos dentro del magic div */
.text-content ul { list-style: none; margin-bottom: 2rem; }
.text-content li { display: flex; align-items: flex-start; gap: 0.75rem; margin-bottom: 0.75rem; }
.text-content .icon {
    flex-shrink: 0;
    width: 24px;
    height: 24px;
    color: var(--color-akutangulo);
    margin-top: 2px;
}

/* Responsive & Zig-Zag */
@media (min-width: 1024px) {
    .magic-div { padding: 6rem 0; }
    
    .magic-div-content {
        flex-direction: row;
        align-items: stretch;
        gap: 4rem;
    }
    .media-content, .text-content {
        width: 50%;
        flex: 1 1 50%;
    }
    
    /* Orden por defecto */
    .media-content { order: 1; }
    .text-content { order: 2; }
    
    /* Zig-Zag Automático para hijos pares */
    .magic-div:nth-child(even) .magic-div-content {
        flex-direction: row-reverse;
    }
}

/* =========================================
   6. SECCIÓN: CARDS GRID
   ========================================= */
.cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2.5rem;
    padding: 2rem 0;
}

.ak-card {
    background-color: var(--bg-card); 
    border: 1px solid var(--border-card);
    border-radius: 1rem;
    padding: 2rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 6px rgba(0,0,0,0.05); 
}

.ak-card:hover {
    transform: translateY(-10px);
    border-color: var(--color-chatsbotses);
    box-shadow: 0 10px 30px rgba(0, 255, 255, 0.25); 
}

/* Icono dentro de Card */
.card-icon {
    width: 60px;
    height: 60px;
    background: var(--bg-icon); 
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-akutangulo); 
    margin-bottom: 0.5rem;
    transition: transform 0.3s ease;
}

.ak-card:hover .card-icon {
    transform: scale(1.1) rotate(5deg);
    background: var(--color-akutangulo);
    color: #fff;
}

.ak-card h3 {
    font-size: 1.5rem;
    margin: 0;
    font-weight: 700;
    color: var(--text-primary);
}

.ak-card p {
    color: var(--text-secondary);
    font-size: 1rem;
    flex-grow: 1;
    margin: 0;
}

/* Ajuste específico para botón dentro de card */
.ak-card .action-button {
    justify-content: center;
    width: 100%;
    margin-top: auto;
}
    </style>

    <style>
    /* =========================================
   7. SECCIÓN ESPECÍFICA: BUSCADOR DE MODELOS LLM
   ========================================= */

/* --- Layout del Buscador y Filtros --- */
.search-form {
    margin-bottom: 2rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
}

.search-form__input-group {
    display: flex;
    align-items: center;
    border: 1px solid var(--border);
    border-radius: 25px;
    background-color: var(--bg-card); /* Fondo cristal */
    overflow: hidden;
    transition: box-shadow 0.3s ease, border-color 0.3s ease;
}

.search-form__input-group:focus-within {
    border-color: var(--color-chatsbotses);
    box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
}

.search-form__input {
    border: none;
    outline: none;
    padding: 15px 20px;
    font-size: 1rem;
    flex-grow: 1;
    background: transparent;
    color: var(--text-primary);
}

.search-form__input::placeholder {
    color: var(--text-muted);
}

.search-form__button {
    border: none;
    background-color: transparent;
    padding: 10px 20px;
    cursor: pointer;
    color: var(--text-secondary);
    transition: color 0.2s;
}

.search-form__button:hover {
    color: var(--color-chatsbotses);
}
.search-form__button svg {
    width: 24px;
    height: 24px;
    fill: currentColor;
}

/* --- Panel de Control (Filtros) --- */
#controls-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(30%, 1fr));
    gap: 20px;
    padding: 2rem;
    background-color: var(--bg-card);
    border: 1px solid var(--border-card);
    border-radius: 1rem;
    margin-bottom: 3rem;
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
}

.control-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.control-group label {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Estilo personalizado para los SELECTS */
.control-group select {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--border);
    border-radius: 8px;
    font-size: 1rem;
    background-color: var(--bg-input); 
    color: var(--text-primary);
    cursor: pointer;
    outline: none;
    transition: border 0.3s, background-color 0.3s;
}

.control-group select:focus {
    border-color: var(--color-akutangulo);
    box-shadow: 0 0 0 2px rgba(147, 0, 211, 0.2);
}

/* --- Acordeón de Fuentes de Datos --- */
.data-sources-details {
    background-color: rgba(147, 0, 211, 0.1);
    border: 1px solid var(--border);
    border-radius: 8px;
    margin: 0 auto 2rem auto;
    max-width: 800px;
    overflow: hidden;
}

.data-sources-summary {
    padding: 15px;
    font-weight: 600;
    cursor: pointer;
    color: var(--text-primary);
    background-color: rgba(243, 243, 243, 0.2);
    transition: background 0.2s;
}
.data-sources-summary:hover {
    background-color: rgba(147, 0, 211, 0.2);
}

.data-sources-content {
    padding: 15px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 10px;
}

.data-source-link {
    margin: 0;
    font-size: 0.9em;
    color: var(--text-secondary);
}

/* --- Lista de Modelos (Items) --- */
#models-container {
    padding: 0;
    margin: 0;
}

.model-list {
    list-style-type: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

/* Tarjeta individual del Modelo - Hereda estilos de .ak-card conceptualmente */
.model-item {
    background-color: var(--bg-card);
    border: 1px solid var(--border-card);
    border-radius: 0.75rem;
    transition: all 0.2s ease-in-out;
    overflow: hidden;
}

.model-item:hover {
    border-color: var(--color-akutangulo);
    transform: translateY(-2px);
    box-shadow: 0 4px 20px rgba(147, 0, 211, 0.2);
}

/* Cabecera de la Tarjeta (Clickable) */
.model-summary {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.25rem;
    cursor: pointer;
    background: transparent;
}
.model-summary:hover {
    background-color: rgba(255, 255, 255, 0.03);
}

/* Nombre del modelo */
.model-name-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
    position: relative;
    padding: 5px 10px;
    border-radius: 5px;
    transition: background-color 0.2s;
}
.model-name-wrapper:hover {
    background-color: rgba(0, 194, 255, 0.1);
}

.model-name {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-primary);
}

/* Icono de Copiar */
.copy-icon svg {
    width: 18px;
    height: 18px;
    fill: var(--text-muted);
    transition: fill 0.2s;
}
.model-name-wrapper:hover .copy-icon svg {
    fill: var(--color-cta);
}

/* Tooltip "Copiado" */
.model-name-wrapper.copied::after {
    content: '¡ID Copiado!';
    position: absolute;
    top: -30px;
    left: 50%;
    transform: translateX(-50%);
    background-color: var(--color-akutangulo);
    color: white;
    padding: 4px 12px;
    border-radius: 4px;
    font-size: 0.8rem;
    font-weight: 600;
    white-space: nowrap;
    box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    animation: fadeOut 1.5s forwards;
}

/* Iconos y Etiquetas a la derecha */
.summary-right-section {
    display: flex;
    align-items: center;
    gap: 15px;
}

.sort-metric {
    font-size: 0.85em;
    color: #fff;
    background-color: var(--primary);
    padding: 4px 12px;
    border-radius: 20px;
    white-space: nowrap;
    font-weight: 600;
}

.summary-icons {
    display: flex;
    gap: 10px;
    font-size: 1.2em;
}

/* --- Detalles Expandibles --- */
.model-details {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), padding 0.4s;
    background-color: var(--bg-inner-details);
}

.model-details.expanded {
    max-height: 1000px; /* Suficiente para contenido largo */
    padding: 1.5rem;
    border-top: 1px solid var(--border-card);
}

.detail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1rem 2rem;
    font-size: 0.95rem;
}

.detail-grid span {
    display: flex;
    align-items: baseline;
    padding: 4px 0;
}

.detail-grid strong {
    display: inline-block;
    min-width: 140px;
    color: var(--color-accent-text);
    font-weight: 600;
    flex-shrink: 0;
}

.detail-grid a {
    color: var(--accent-secondary);
}
.detail-grid a:hover {
    text-decoration: underline;
    color: var(--accent-primary);
}

/* Mensaje de estado/error */
#status-message {
    text-align: center;
    font-size: 1.2em;
    color: var(--text-muted);
    padding: 40px 0;
}

.error-message {
    color: #ff6b6b;
    padding: 20px;
    background-color: rgba(255, 107, 107, 0.1);
    border-radius: 8px;
    border: 1px solid #ff6b6b;
}

.retry-button {
    margin-top: 15px;
    padding: 8px 20px;
    background-color: #ff6b6b;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
}

/* Responsive adjustments */
@media (max-width: 600px) {
    .model-summary {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
    }
    .summary-right-section {
        width: 100%;
        justify-content: space-between;
    }
    .detail-grid strong {
        min-width: 110px;
    }
    #controls-container {
    grid-template-columns: repeat(auto-fit, minmax(50%, 1fr));
}
}

.llm-icon {
  width: 20px;       /* Tamaño consistente */
  height: 20px;
  stroke-width: 2;   /* Grosor de línea legible */
  stroke: currentColor; /* Hereda el color del texto */
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
  vertical-align: middle; /* Alineación con el texto */
  margin-right: 4px; /* Espaciado si hay texto al lado */
  color: var(--text-primary);
}

    </style>
    
    <!-- Componente de Tema -->
    <script type="module" src="../assets/web-components/cambiar-tema-chatsbotses.js"></script>
</head>
<body>
    <cambiar-tema-chatsbotses></cambiar-tema-chatsbotses>

    <div class="container">
        <header>
            <h1 id="main-title" class="neon-text">Modelos LLM disponibles en Akutangulo</h1>
        </header>

        <form action="#" class="search-form" id="search-form">
            <div class="search-form__input-group">
                <input type="search" class="search-form__input" placeholder="Buscar por nombre, ID, descripción..." aria-label="Buscar modelos">
                <button type="submit" class="search-form__button" aria-label="Buscar">
                    <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>
                </button>
            </div>
        </form>

        <details class="data-sources-details">
            <summary class="data-sources-summary">Fuentes de Clasificación y Datos</summary>
            <div class="data-sources-content">                        
                <p class="data-source-link">Modelos de <a href="https://openrouter.ai/models" target="_blank" rel="noopener noreferrer">OpenRouter.ai</a></p>
                <p class="data-source-link">Modelos en Español <a href="https://huggingface.co/spaces/la-leaderboard/la-leaderboard" target="_blank" rel="noopener noreferrer">La Leaderboard</a></p>                        
                <p class="data-source-link">Clasificación de modelos por <a href="https://lmarena.ai/leaderboard" target="_blank" rel="noopener noreferrer">LMArena.ai</a></p>
                <p class="data-source-link">Clasificación de modelos por <a href="https://www.designarena.ai/" target="_blank" rel="noopener noreferrer">DesignArena</a></p>
                <p class="data-source-link">Clasificación de modelos por <a href="https://topllms.com/es/" target="_blank" rel="noopener noreferrer">TopLLMs.com</a></p>
                <p class="data-source-link">Clasificación de modelos por <a href="https://artificialanalysis.ai/" target="_blank" rel="noopener noreferrer">Artificial Analysis</a></p>
                <p class="data-source-link">Clasificación de modelos por la <a href="https://crfm.stanford.edu/helm/" target="_blank" rel="noopener noreferrer">Universidad de Stanford</a></p>
                <p class="data-source-link">Clasificación de modelos por el <a href="https://opencompass.org.cn/home" target="_blank" rel="noopener noreferrer">Laboratorio de IA en Shanghai</a></p>
            </div>
        </details>

        <div id="controls-container">
            <div class="control-group">
                <label for="typeSelect">Tipo de Modelo:</label>
                <select id="typeSelect">
                    <option value="all">Todos los Modelos</option>
                    <optgroup label="Por Modalidad">
                        <option value="text-only">Texto a Texto</option>
                        <option value="multimodal">Multimodal (Visión)</option>
                        <option value="image-generation">Generación de Imágenes</option>
                        <option value="audio-capable">Capacidad de Audio</option>
                    </optgroup>
                    <optgroup label="Por Especialización">
                        <option value="reasoning">Especialistas en Razonamiento</option>
                        <option value="code">Especialistas en Código</option>
                        <option value="creative">Escritura Creativa / Roleplay</option>
                        <option value="moderation">Modelos para Moderación</option>
                    </optgroup>
                    <optgroup label="Por Capacidad Técnica">
                        <option value="tools">Soporte para Herramientas</option>
                        <option value="web-search">Búsqueda Web</option>
                        <option value="rag">Optimizados para RAG</option>
                        <option value="structured-output">Salida Estructurada (JSON)</option>
                        <option value="moe">Arquitectura MoE</option>
                    </optgroup>
                </select>
            </div>
            <div class="control-group">
                <label for="sortSelect">Ordenar por:</label>
                <select id="sortSelect">
                    <option value="created-desc">Más Recientes Primero</option>
                    <option value="prompt_price-asc">Precio Entrada (Más Barato)</option>
                    <option value="prompt_price-desc">Precio Entrada (Más Caro)</option>
                    <option value="completion_price-asc">Precio Salida (Más Barato)</option>
                    <option value="completion_price-desc">Precio Salida (Más Caro)</option>
                    <option value="context_length-desc">Contexto (Mayor a Menor)</option>
                    <option value="max_completion_tokens-desc">Salida Máxima (Mayor a Menor)</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="ZDRSelect">Privacidad ZDR y Moderación:</label>
                <select id="ZDRSelect">
                    <option value="all">Todos</option>
                    <option value="zdr">Solo Zero Data Retention (ZDR)</option>
                    <option value="no-zdr">Solo No ZDR (Persistente)</option>
                    <option value="moderated">Solo Moderados</option>
                    <option value="unmoderated">Solo No Moderados</option>
                </select>
            </div>
        </div>

        <main>
            <p id="status-message">Cargando modelos desde Akutangulo.com...</p>
            <div id="models-container"></div>
        </main>
    </div>

<script>
/* =========================================
   LA LÓGICA JAVASCRIPT SE MANTIENE EXACTAMENTE IGUAL
   SOLO HE COPIADO EL BLOQUE PARA QUE EL ARCHIVO ESTÉ COMPLETO
========================================= */
const CONFIG = {
URLS: {
ALL_MODELS: 'https://openrouter.ai/api/v1/models',
ZDR_MODELS: 'https://openrouter.ai/api/v1/endpoints/zdr'
},
DOM: {
container: document.getElementById('models-container'),
statusMessage: document.getElementById('status-message'),
mainTitle: document.getElementById('main-title'),
inputs: {
hideFree: document.getElementById('hideFreeModelsCheckbox'),
taxFree: document.getElementById('sinImpuestos'),
privacy: document.getElementById('ZDRSelect'),
sort: document.getElementById('sortSelect'),
type: document.getElementById('typeSelect'),
searchForm: document.getElementById('search-form'),
searchInput: document.querySelector('.search-form__input')
}
}
};

let state = {
allModels: [],
zdrModelIds: new Set(),
zdrProviderData: new Map(),
searchTerm: '',
debounceTimer: null
};

const FILTER_STRATEGIES = {
'all': () => true,
'text-only': m => m.architecture?.input_modalities?.length === 1 && m.architecture.input_modalities[0] === 'text',
'multimodal': m => m.architecture?.input_modalities?.includes('image'),
'image-generation': m => m.architecture?.output_modalities?.includes('image'),
'audio-capable': m => m.architecture?.input_modalities?.includes('audio'),
'reasoning': m => m.supported_parameters?.some(p => ['reasoning', 'include_reasoning'].includes(p)) || /reasoning|thinking|prover|logic/i.test(m.description),
'code': m => /code|coder|codex|devstral|swe-bench|humaneval|codestral/i.test(m.name) || /code|coder|codex|devstral|swe-bench/i.test(m.description),
'creative': m => /roleplay|story|creative|narrative|anubis|euryale|midnight|magnum/i.test(m.name) || /roleplay|story|creative|narrative/i.test(m.description),
'moderation': m => /guard|safety|moderation|classify content/i.test(m.name) || /guard|safety|moderation/i.test(m.description),
'tools': m => m.supported_parameters?.some(p => ['tools', 'tool_choice'].includes(p)),
'web-search': m => parseFloat(m.pricing?.web_search) > 0 || m.supported_parameters?.includes('web_search_options') || /web search|deep research/i.test(m.description),
'rag': m => /(RAG|retrieval-augmented|retrieval systems)/i.test(m.description),
'structured-output': m => m.supported_parameters?.includes('structured_outputs'),
'moe': m => /Mixture-of-Experts|MoE/i.test(m.description)
};

const formatters = {
price: (value, unit = 'tokens') => {
const num = parseFloat(value);
if (num === 0) return 'Gratis';
if (isNaN(num) || num < 0) return 'N/A';
const readable = (unit === 'tokens') ? (num * 1e6).toFixed(4) : num.toFixed(6);
return `$${parseFloat(readable)} / ${unit === 'tokens' ? '1M tokens' : unit}`;
},
tokens: (value) => {
if (typeof value !== 'number' || value <= 0) return 'N/A';
return value.toLocaleString('es-ES') + ' tokens';
},
fullDate: (timestamp) => {
if (!timestamp) return 'Desconocido';
return new Intl.DateTimeFormat('es-ES', { dateStyle: 'long' }).format(new Date(timestamp * 1000));
},
capitalize: (str) => {
if (!str) return 'N/A';
return str.charAt(0).toUpperCase() + str.slice(1);
}
};

function computeDisplayedUnitPrice(raw) {
const base = parseFloat(raw);
if (isNaN(base)) return raw;
const isTaxFree = !!CONFIG.DOM.inputs.taxFree?.checked;
const value = isTaxFree ? base : base * 1.5;
return String(value);
}

const isFreeModel = (model) =>
parseFloat(model.pricing?.prompt || 0) === 0 &&
parseFloat(model.pricing?.completion || 0) === 0;

function createModelElement(model) {
const li = document.createElement('li');
li.className = 'model-item';

const isZDR = state.zdrModelIds.has(model.id);
const providerName = state.zdrProviderData.get(model.id) || model.top_provider?.name || 'Con almacenamiento persistente';
const isModerated = model.top_provider?.is_moderated;

// Definición de iconos SVG (Estilo Lineal Moderno - 24x24 viewBox)
const svgs = {
    vision: `<svg class="llm-icon icon-vision" viewBox="0 0 24 24"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>`,
    image: `<svg class="llm-icon icon-image" viewBox="0 0 24 24"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>`,
    audio: `<svg class="llm-icon icon-audio" viewBox="0 0 24 24"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg>`,
    reasoning: `<svg class="llm-icon icon-reasoning" viewBox="0 0 24 24"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-1 1.5-2 1.5-3.5a6 6 0 0 0-12 0c0 1.5.5 2.5 1.5 3.5.8.8 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>`,
    web: `<svg class="llm-icon icon-web" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>`,
    tools: `<svg class="llm-icon icon-tool" viewBox="0 0 24 24"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>`,
    zdr: `<svg class="llm-icon icon-zdr" viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="m9 12 2 2 4-4"/></svg>`
};

let iconsHTML = '';

// Lógica de renderizado
if (model.architecture?.input_modalities?.includes('image')) {
    iconsHTML += `<span title="Capacidad de Visión (Entrada)">${svgs.vision}</span>`;
}

if (model.architecture?.output_modalities?.includes('image')) {
    iconsHTML += `<span title="Generación de Imágenes (Salida)">${svgs.image}</span>`;
}

if (model.architecture?.input_modalities?.includes('audio')) {
    iconsHTML += `<span title="Capacidad de Audio (Entrada)">${svgs.audio}</span>`;
}

if (model.supported_parameters?.some(p => ['reasoning', 'include_reasoning'].includes(p))) {
    iconsHTML += `<span title="Capacidad de Razonamiento (CoT)">${svgs.reasoning}</span>`;
}

if (parseFloat(model.pricing?.web_search || 0) > 0) {
    iconsHTML += `<span title="Capacidad de Búsqueda Web">${svgs.web}</span>`;
}

if (model.supported_parameters?.some(p => ['tools', 'tool_choice'].includes(p))) {
    iconsHTML += `<span title="Soporte para Herramientas (Function Calling)">${svgs.tools}</span>`;
}

if (isZDR) {
    iconsHTML += `<span title="Zero Data Retention (Privacidad)">${svgs.zdr}</span>`;
}

let metricHTML = '';
const sortValue = CONFIG.DOM.inputs.sort.value;
if (sortValue !== 'created-desc') {
const metricText = getSortMetricText(model, sortValue);
if (metricText) metricHTML = `<span class="sort-metric">${metricText}</span>`;
}

li.innerHTML = `
<div class="model-summary">
<div class="model-name-wrapper" title="Hacer clic para copiar ID">
<span class="model-name">${model.name}</span>
<span class="copy-icon"><svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></span>
</div>
<div class="summary-right-section">
${metricHTML}
<div class="summary-icons">${iconsHTML}</div>
</div>
</div>
<div class="model-details">
<div class="detail-grid">
<span><strong>ID del Modelo:</strong> ${model.id}</span>
<span><strong>Proveedor:</strong> ${providerName}</span>
<span><strong>Lanzado el:</strong> ${formatters.fullDate(model.created)}</span>
<span><strong>Contexto:</strong> ${formatters.tokens(model.context_length)}</span>
<span><strong>Salida Máxima:</strong> ${formatters.tokens(model.top_provider?.max_completion_tokens)}</span>
<span><strong>Moderado:</strong> ${isModerated ? 'Sí' : 'No'}</span>
<span><strong>Tokenizer:</strong> ${model.architecture?.tokenizer || 'N/A'}</span>
${model.architecture?.instruct_type ? `<span><strong>Formato Inst.:</strong> ${model.architecture.instruct_type}</span>` : ''}
${model.canonical_slug ? `<span><strong>Web:</strong> <a href="https://openrouter.ai/models/${model.canonical_slug}" target="_blank">Ver en OpenRouter</a></span>` : ''}
${model.hugging_face_id ? `<span><strong>Hugging Face:</strong> <a href="https://huggingface.co/${model.hugging_face_id}" target="_blank">${model.hugging_face_id}</a></span>` : ''}
<hr style="grid-column: 1 / -1; border: 0; border-top: 1px dashed var(--border); margin: 5px 0;">
<span><strong>Precio Entrada:</strong> ${formatters.price(computeDisplayedUnitPrice(model.pricing?.prompt))}</span>
<span><strong>Precio Salida:</strong> ${formatters.price(computeDisplayedUnitPrice(model.pricing?.completion))}</span>
${parseFloat(model.pricing?.image) > 0 ? `<span><strong>Img:</strong> ${formatters.price(computeDisplayedUnitPrice(model.pricing?.image), 'imagen')}</span>` : ''}
</div>
</div>
`;

const summary = li.querySelector('.model-summary');
const details = li.querySelector('.model-details');
const nameWrapper = li.querySelector('.model-name-wrapper');

summary.addEventListener('click', () => details.classList.toggle('expanded'));
nameWrapper.addEventListener('click', (e) => {
e.stopPropagation();
navigator.clipboard.writeText(model.id).then(() => {
nameWrapper.classList.add('copied');
setTimeout(() => nameWrapper.classList.remove('copied'), 1500);
});
});

return li;
}

function getSortMetricText(model, sortValue) {
const [prop] = sortValue.split('-');
switch (prop) {
case 'prompt_price': return formatters.price(computeDisplayedUnitPrice(model.pricing?.prompt));
case 'completion_price': return formatters.price(computeDisplayedUnitPrice(model.pricing?.completion));
case 'context_length': return formatters.tokens(model.context_length);
case 'max_completion_tokens': return formatters.tokens(model.top_provider?.max_completion_tokens);
default: return '';
}
}

function renderDisplay(models) {
const container = CONFIG.DOM.container;
container.innerHTML = '';

if (models.length === 0) {
CONFIG.DOM.statusMessage.style.display = 'block';
CONFIG.DOM.statusMessage.textContent = 'No se encontraron modelos con los filtros seleccionados.';
return;
}

CONFIG.DOM.statusMessage.style.display = 'none';

const fragment = document.createDocumentFragment();
const sortBy = CONFIG.DOM.inputs.sort.value;

if (sortBy === 'created-desc') {
const grouped = models.reduce((acc, m) => {
const date = new Date(m.created * 1000);
const key = new Intl.DateTimeFormat('es-ES', { month: 'long', year: 'numeric' }).format(date);
const capitalizedKey = key.charAt(0).toUpperCase() + key.slice(1);
if (!acc[capitalizedKey]) acc[capitalizedKey] = [];
acc[capitalizedKey].push(m);
return acc;
}, {});

Object.keys(grouped).forEach(groupName => {
const header = document.createElement('h2');
header.className = 'neon-text';
header.textContent = groupName;
fragment.appendChild(header);

const ul = document.createElement('ul');
ul.className = 'model-list';
grouped[groupName].forEach(m => ul.appendChild(createModelElement(m)));
fragment.appendChild(ul);
});

} else {
const ul = document.createElement('ul');
ul.className = 'model-list';
models.forEach(m => ul.appendChild(createModelElement(m)));
fragment.appendChild(ul);
}

container.appendChild(fragment);
}

function updateDisplay() {
let processed = [...state.allModels];
const { inputs } = CONFIG.DOM;

const privacySetting = inputs.privacy.value;
if (privacySetting === 'zdr') {
processed = processed.filter(m => state.zdrModelIds.has(m.id));
} else if (privacySetting === 'no-zdr') {
processed = processed.filter(m => !state.zdrModelIds.has(m.id));
} else if (privacySetting === 'moderated') {
processed = processed.filter(m => m.top_provider?.is_moderated === true);
} else if (privacySetting === 'unmoderated') {
processed = processed.filter(m => !m.top_provider?.is_moderated);
}

const typeStrategy = FILTER_STRATEGIES[inputs.type.value] || FILTER_STRATEGIES['all'];
processed = processed.filter(typeStrategy);

const showFreeModels = inputs.hideFree ? !!inputs.hideFree.checked : false;
if (!showFreeModels) {
processed = processed.filter(m => !isFreeModel(m));
}

if (state.searchTerm) {
const term = state.searchTerm.toLowerCase();
processed = processed.filter(m => {
const nameMatch = m.name?.toLowerCase().includes(term);
const idMatch = m.id?.toLowerCase().includes(term);
const descMatch = m.description?.toLowerCase().includes(term);
const providerName = (state.zdrProviderData.get(m.id) || m.top_provider?.name || '').toLowerCase();
const providerMatch = providerName.includes(term);
return nameMatch || idMatch || descMatch || providerMatch;
});
}

CONFIG.DOM.mainTitle.textContent = `${processed.length} Modelos LLM disponibles`;

const [prop, order] = inputs.sort.value.split('-');
const isAsc = order === 'asc';
processed.sort((a, b) => {
let valA, valB;
if (prop === 'created') {
valA = a.created || 0;
valB = b.created || 0;
} else if (prop === 'max_completion_tokens') {
valA = a.top_provider?.max_completion_tokens ?? (isAsc ? Infinity : -1);
valB = b.top_provider?.max_completion_tokens ?? (isAsc ? Infinity : -1);
} else if (prop.includes('price')) {
const priceKey = prop.split('_')[0];
valA = parseFloat(a.pricing?.[priceKey] || (isAsc ? Infinity : -1));
valB = parseFloat(b.pricing?.[priceKey] || (isAsc ? Infinity : -1));
} else {
valA = a[prop] ?? (isAsc ? Infinity : -1);
valB = b[prop] ?? (isAsc ? Infinity : -1);
}
return isAsc ? valA - valB : valB - valA;
});

renderDisplay(processed);
}

async function fetchModels() {
try {
CONFIG.DOM.statusMessage.textContent = 'Cargando y cruzando datos de modelos...';

const [allRes, zdrRes] = await Promise.all([
fetch(CONFIG.URLS.ALL_MODELS),
fetch(CONFIG.URLS.ZDR_MODELS)
]);

if (!allRes.ok || !zdrRes.ok) throw new Error('Error en la respuesta de la API');

const allData = await allRes.json();
const zdrData = await zdrRes.json();

zdrData.data.forEach(item => {
let extractedId = item.name;
if (item.name.includes(' | ')) {
extractedId = item.name.split(' | ')[1].trim();
}
state.zdrModelIds.add(extractedId);
state.zdrProviderData.set(extractedId, item.provider_name);
});

state.allModels = (allData.data || []).filter(m => m.id !== 'openrouter/auto');

updateDisplay();
} catch (error) {
console.error('Error crítico:', error);
CONFIG.DOM.statusMessage.innerHTML = `
<div class="error-message">
<p>Error al conectar con las APIs de OpenRouter.</p>
<button class="retry-button" onclick="fetchModels()">Espera unos segundos y Reintentalo de nuevo</button>
</div>`;
CONFIG.DOM.statusMessage.style.color = 'var(--error-color)';
}
}

function setupEventListeners() {
const { inputs } = CONFIG.DOM;

[inputs.hideFree, inputs.taxFree, inputs.privacy, inputs.sort, inputs.type].forEach(el => {
if (el) el.addEventListener('change', updateDisplay);
});

if (inputs.searchForm) {
inputs.searchForm.addEventListener('submit', (e) => {
e.preventDefault();
state.searchTerm = inputs.searchInput.value.trim();
updateDisplay();
});
}

if (inputs.searchInput) {
inputs.searchInput.addEventListener('input', (e) => {
clearTimeout(state.debounceTimer);
state.debounceTimer = setTimeout(() => {
state.searchTerm = e.target.value.trim();
updateDisplay();
}, 300);
});
}
}

document.addEventListener('DOMContentLoaded', () => {
setupEventListeners();
fetchModels();
});
</script>
</body>
</html>

